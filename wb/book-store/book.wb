{"type":"div","on":{},"style":{},"version":"wb4","children":[{"style":{},"type":"import","name":"Import","on":{},"version":"wb4","children":[],"url":"/api/v2/cms/contents/scripts/content#script-libs","id":"import-scripts"},{"style":{},"type":"import","name":"Import","on":{},"version":"wb4","children":[],"url":"/api/v2/cms/contents/common-widgets/content#main-toolbar","id":"import-toolbar"},{"style":{},"type":"div","children":[{"style":{},"type":"div","name":"div","on":{},"version":"wb4","children":[{"style":{"width":"230px","height":"373px","maxWidth":"100%","maxHeight":"100%","minHeight":"373px","minWidth":"230px"},"type":"img","alt":"{{title}}","html":"","on":{},"version":"wb4","src":"{{{cover}}}?w=200&h=322&f=cover&p=center","class":"mx-auto rounded img-thumbnail","id":"img-cover"}],"class":"col-auto","id":"div-cover"},{"style":{},"type":"div","children":[{"style":{},"type":"h1","html":"Book Title","on":{},"version":"wb4","id":"title","class":"mt-2 h4"},{"style":{},"type":"p","on":{},"version":"wb4","html":"The description of this Ebook will be placed here. The description of this Ebook will be placed here. The description of this Ebook will be placed here. The description of this Ebook will be placed here. The description of this Ebook will be placed here.","id":"description"},{"style":{},"type":"button","buttonType":"button","class":"btn btn-outline-primary","on":{},"version":"wb4","html":"Download","id":"download-btn"},{"style":{},"type":"table","class":"table table-sm table-borderless mt-3","children":[{"style":{},"type":"tbody","children":[{"style":{},"type":"style","name":"style","on":{},"version":"wb4","text":"#table-info .first-col {\n    width: 189px;\n    min-width: 150px;\n    max-width: 189px;\n}\n\n#table-info .second-col {\n    min-width: 170px;\n}"},{"style":{},"type":"tr","children":[{"style":{},"type":"td","children":[{"type":"p","html":"Author(s)","on":{},"style":{},"version":"wb4"}],"on":{},"version":"wb4","class":"first-col"},{"style":{},"type":"td","children":[{"type":"p","html":"Author 1, Author 2, Author 3","on":{},"style":{},"version":"wb4","id":"field-author"}],"on":{},"version":"wb4","class":"second-col"}],"on":{},"version":"wb4","id":"tr-authors"},{"style":{},"type":"tr","children":[{"style":{},"type":"td","children":[{"type":"p","html":"Format","on":{},"style":{},"version":"wb4"}],"on":{},"version":"wb4","class":"first-col"},{"style":{},"type":"td","children":[{"type":"p","html":"PDF","on":{},"style":{},"version":"wb4","id":"field-format"}],"on":{},"version":"wb4","class":"second-col"}],"on":{},"version":"wb4","id":"tr-format"},{"style":{},"type":"tr","children":[{"style":{},"type":"td","children":[{"type":"p","on":{},"style":{},"version":"wb4","html":"ISBN"}],"on":{},"version":"wb4","class":"first-col"},{"style":{},"type":"td","children":[{"type":"p","html":"1234567890","on":{},"style":{},"version":"wb4","id":"field-isbn"}],"on":{},"version":"wb4","class":"second-col"}],"on":{},"version":"wb4","id":"tr-isbn"},{"style":{},"type":"tr","children":[{"style":{},"type":"td","children":[{"type":"p","on":{},"style":{},"version":"wb4","html":"Edition"}],"on":{},"version":"wb4","class":"first-col"},{"style":{},"type":"td","children":[{"type":"p","html":"1st","on":{},"style":{},"version":"wb4","id":"field-edition"}],"on":{},"version":"wb4","class":"second-col"}],"on":{},"version":"wb4","id":"tr-edition"},{"style":{},"type":"tr","children":[{"style":{},"type":"td","children":[{"type":"p","on":{},"style":{},"version":"wb4","html":"Publisher"}],"on":{},"version":"wb4","class":"first-col"},{"style":{},"type":"td","children":[{"type":"p","on":{},"style":{},"version":"wb4","html":"Knowsmore","id":"field-publisher"}],"on":{},"version":"wb4","class":"second-col"}],"on":{},"version":"wb4","id":"tr-publisher"},{"style":{},"type":"tr","children":[{"style":{},"type":"td","children":[{"type":"p","on":{},"style":{},"version":"wb4","html":"Date Published"}],"on":{},"version":"wb4","class":"first-col"},{"style":{},"type":"td","children":[{"type":"p","html":"2020-08-08","on":{},"style":{},"version":"wb4","id":"field-date-published"}],"on":{},"version":"wb4","class":"second-col"}],"on":{},"version":"wb4","id":"tr-date-published"},{"style":{},"type":"tr","children":[{"style":{},"type":"td","children":[{"type":"p","on":{},"style":{},"version":"wb4","html":"Genre/Type"}],"on":{},"version":"wb4","class":"first-col"},{"style":{},"type":"td","children":[{"type":"p","on":{},"style":{},"version":"wb4","html":"Nonfiction, Computer Science","id":"field-genre"}],"on":{},"version":"wb4","class":"second-col"}],"on":{},"version":"wb4","id":"tr-genre"},{"style":{},"type":"tr","children":[{"style":{},"type":"td","children":[{"type":"p","on":{},"style":{},"version":"wb4","html":"Number of Pages"}],"on":{},"version":"wb4","class":"first-col"},{"style":{},"type":"td","children":[{"type":"p","html":"313","on":{},"style":{},"version":"wb4","id":"feild-page-number"}],"on":{},"version":"wb4","class":"second-col"}],"on":{},"version":"wb4","id":"tr-number-of-pages"},{"style":{},"type":"tr","children":[{"style":{},"type":"td","children":[{"type":"p","on":{},"style":{},"version":"wb4","html":"Keywords"}],"on":{},"version":"wb4","class":"first-col"},{"style":{},"type":"td","children":[{"type":"p","on":{},"style":{},"version":"wb4","html":"Keyword1, Keyword2","id":"field-keywords"}],"on":{},"version":"wb4","class":"second-col"}],"on":{},"version":"wb4","id":"tr-keywords"},{"style":{},"type":"tr","children":[{"style":{},"type":"td","children":[{"type":"p","on":{},"style":{},"version":"wb4","html":"Size"}],"on":{},"version":"wb4","class":"first-col"},{"style":{},"type":"td","children":[{"type":"p","html":"2.3M","on":{},"style":{},"version":"wb4","id":"field-size"}],"on":{},"version":"wb4","class":"second-col"}],"on":{},"version":"wb4","id":"tr-size"},{"style":{},"type":"tr","children":[{"style":{},"type":"td","children":[{"type":"p","on":{},"style":{},"version":"wb4","html":"Age Range"}],"on":{},"version":"wb4","class":"first-col"},{"style":{},"type":"td","children":[{"type":"p","html":"8-12","on":{},"style":{},"version":"wb4","id":"field-age-range"}],"on":{},"version":"wb4","class":"second-col"}],"on":{},"version":"wb4","id":"tr-age-range"}],"on":{},"version":"wb4"}],"on":{},"version":"wb4","id":"table-info"}],"on":{},"version":"wb4","id":"div-info","class":"col-sm"}],"on":{"init":"var brand = $window.getMeta('theme:brand_title');\n\nvar id = $routeParams['id'];\nvar url = '/api/v2/sdp/assets/' + id;\nvar param = {\n\tgraphql: '{id,title,description,size,download,price,cover,creation_dtime,modif_dtime,drive{title,driver},metas{key,value},tags{id,name},categories{id,name}}'\n};\n\nif(id && $widget.state == 'ready'){\n\t$http.get(url, { 'params': param })\n\t.then(function(res) {\n\t\tvar data = res.data;\n\t\tdata = editData(data);\n\t\tsetSeoInfo(data);\n\t\tsetBookInfo(data);\n\t});\n}\n\nfunction editData(item) {\n\t// Add metas\n\titem.metamap = {};\n\titem.metas.forEach(function(meta) {\n\t\tvar k = meta.key.replace(/\\./g, '_');\n\t\titem.metamap[k] = meta.value;\n\t});\n\t// Data for microdata\n\titem.creation_dtime_iso = new Date(item.creation_dtime).toISOString();\n\titem.modif_dtime_iso = new Date(item.modif_dtime).toISOString();\n\treturn item;\n}\n\nfunction setSeoInfo(data) {\n\tvar url = '/wb/book?id=' + data.id;\n\t$window.setLink('canonical', {\n\t\t'rel': 'canonical',\n\t\t'href': url\n\t});\n\t$window.setLink('favicon', {\n\t\t'rel': 'icon',\n\t\t'href': url\n\t});\n\t$document.attr('title', data.title + ' | ' + brand);\n\t$window.setMeta('description', data.description);\n\t$window.setMeta('link.cover', data.cover);\n}\n\nfunction setBookInfo(data) {\n\tvar image = $widget.getChildById('div-cover')\n\t\t.getChildById('img-cover');\n\tvar imageW = 230;\n\tvar imageH = 373;\n\tvar infoDiv = $widget.getChildById('div-info');\n\tvar description = infoDiv.getChildById('description');\n\tvar title = infoDiv.getChildById('title');\n\n\ttitle.setProperty('html', data.title);\n\timage.setProperty('src', '/imgx' + data.cover + '?w=' + imageW + '&h=' + imageH);\n\timage.setProperty('alt', data.title);\n\tdescription.setProperty('html', data.description);\n\n\t$('#field-author').html(data.metamap['author'] ? data.metamap['author'] : ' ');\n\t$('#field-format').html(data.metamap['format'] ? data.metamap['format'] : ' ');\n\t$('#field-isbn').html(data.metamap['isbn'] ? data.metamap['isbn'] : ' ');\n\t$('#field-edition').html(data.metamap['edition'] ? data.metamap['edition'] : ' ');\n\t$('#field-publisher').html(data.metamap['publisher'] ? data.metamap['publisher'] : ' ');\n\t$('#field-date-published').html(data.metamap['date_published'] ? data.metamap['date_published'] : ' ');\n\t// $('#field-genre').html(data.metamap['genre'] ? data.metamap['genre'] : ' ');\n\t$('#field-pages').html(data.metamap['pages'] ? data.metamap['pages'] : ' ');\n\t// $('#field-keywords').html(data.metamap['keywords'] ? data.metamap['keywords'] : ' ');\n\t$('#field-size').html(data.metamap['size'] ? data.metamap['size'] : ' ');\n\t$('#field-age-range').html(data.metamap['age_range'] ? data.metamap['age_range'] : ' ');\n\n\t// Set keywords (categories)\n\tvar catList = data.categories.map(function(item) {\n\t\treturn '<a href=\"/wb/books?catId=' + item.id + '\">' + item.name + '</a>';\n\t}).join(', ');\n\t$('#field-genre').html(catList);\n\t// Set genre (tags)\n\tvar tagList = data.tags.map(function(item) {\n\t\treturn '<a href=\"/wb/books?tagId=' + item.id + '\">' + item.name + '</a>';\n\t}).join(', ');\n\t$('#field-keywords').html(tagList);\n}\n\n"},"version":"wb4","id":"div-book","class":"row"},{"style":{},"type":"import","name":"Import","on":{},"version":"wb4","children":[],"url":"/api/v2/cms/contents/common-widgets/content#main-footer","id":"import-footer"}],"modules":[{"title":"Bootstrap 4","url":"//cdn.viraweb123.ir/api/v2/cdn/libs/bootstrap@4.4.1/css/bootstrap.min.css","type":"css","load":"lazy","state":"success"},{"title":"Font Awesome","home":"https://fontawesome.com","version":"4.7.0","description":"The most advanced icon font.","url":"//cdn.viraweb123.ir/api/v2/cdn/libs/Font-Awesome@4.7.0/css/font-awesome.min.css","logo":"https://fontawesome.com/images/favicons/favicon-96x96.png","type":"css","selected":true,"state":"success","load":"lazy"},{"title":"Bootstrap Bundle 4 JS","url":"//cdn.viraweb123.ir/api/v2/cdn/libs/bootstrap@4.4.1/js/bootstrap.bundle.min.js","type":"js","load":"before","state":"success"},{"title":"Google API","url":"https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,700,900","type":"css","load":"lazy","state":"success"},{"title":"Collection Builder JS","url":"//cdn.viraweb123.ir/api/v2/cdn/libs/modules@0.2.11/dist/collection-builder.min.js","type":"js","load":"before","state":"success"}],"id":"div-container","class":"container"}