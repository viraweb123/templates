{"type":"div","style":{"margin":"0px","padding":"0px","display":"flex","flexDirection":"column","minHeight":"100vh","direction":"rtl","marginTop":"0px","marginRight":"0px","marginBottom":"0px","marginLeft":"0px"},"on":{"init":"$window.scrollTo(0,0); // move scroll to top of the page"},"version":"wb4","children":[{"style":{},"type":"style","children":[],"on":{},"version":"wb4","text":"body, h1, h2, h3, h4, h5, h6 {\n\tfont-family: Gandom, BKoodakBold, Roboto, \"Helvetica Neue\", sans-serif;\n}\n\nbody {\n    font-size: 15px;\n}\nh1, h2, h3, h4, h5, h6{\n    font-weight: bold;\n    line-height: 1.9;\n}\nh1{font-size:28px} \nh2{font-size:24px} \nh3{font-size:20px} \nh4{font-size:18px} \nh5{font-size:16px} \nh6{font-size:14px}\np {\n    font-size: 16px;\n    line-height: 1.9;\n}\nli {\n    font-size: 16px;\n    line-height: 1.8;\n}"},{"style":{},"type":"import","name":"Import","on":{},"version":"wb4","children":[],"url":"/api/v2/cms/contents/scripts/content#script-libs","id":"import-scripts"},{"style":{},"type":"import","name":"Import","on":{},"version":"wb4","children":[],"url":"/api/v2/cms/contents/blog-widgets/content#main-toolbar","id":"import-toolbar"},{"style":{"maxWidth":"1100px","flexDirection":"column","minWidth":"200px","display":"flex"},"type":"div","class":"w3-content","children":[{"name":"Header-1","style":{"padding":"8px","paddingTop":"8px","paddingRight":"8px","paddingBottom":"8px","paddingLeft":"8px","position":"relative","textAlign":"center"},"type":"h1","on":{},"version":"wb4","id":"title","html":"لوگوی اصلی سایت","itemprop":"name"},{"style":{"display":"flex","flexDirection":"row","flexWrap":"wrap","direction":"ltr"},"type":"div","name":"div","on":{},"version":"wb4","children":[{"style":{"flexGrow":"10","direction":"rtl","flexBasis":"700px"},"type":"div","class":"w3-container w3-padding","children":[{"style":{"objectFit":"cover","objectPosition":"center top","width":"100%","height":"auto"},"type":"img","alt":"{{title}}","html":"","on":{},"version":"wb4","id":"image","class":"w3-border","itemprop":"contentUrl"},{"style":{"margin":"1px","align":{},"padding":"8px 12px 8px 12px","alignSelf":"stretch","display":"flex","flexDirection":"column","flexWrap":"no-wrap","justifyContent":"center","alignItems":"stretch","backgroundColor":"#ffffff","borderStyle":"solid","borderColor":"#dadada","borderWidth":"2px 2px 2px 2px","borderRadius":"4px 4px 4px 4px"},"type":"div","name":"div","on":{},"children":[{"name":"Pragraph","style":{"padding":"8px","margin":"0px"},"type":"p","on":{},"version":"wb4","id":"description","html":"تصویر لوگوی اصلی سایت. این لوگو به صورت برداری طراحی شده و به عنوان لوگو استفاده میشه"}],"version":"wb4","class":"w3-margin-top","itemprop":"description","id":"div-description"}],"on":{},"id":"div-main","version":"wb4"},{"style":{"display":"flex","flexDirection":"row","justifyContent":"center","flexGrow":"1","flexBasis":"300px","flexShrink":"1","flexWrap":"wrap","direction":"rtl"},"type":"div","class":"w3-col","children":[{"style":{"flexBasis":"300px","flexGrow":"1","display":"flex","flexDirection":"column"},"type":"div","class":"w3-card w3-margin","children":[{"style":{},"type":"div","class":"w3-container w3-padding","children":[{"style":{"position":"relative"},"type":"h4","html":"اطلاعات کلی","on":{},"version":"wb4"}],"on":{},"id":"div-header","version":"wb4"},{"style":{"flexGrow":"1","flexShrink":"1"},"type":"div","class":"w3-container w3-white w3-padding","children":[{"style":{"width":"100%"},"type":"table","name":"Table","on":{},"version":"wb4","children":[],"id":"info-table","html":"<tr><td><img style=\"border-radius:50%;\" src=\"/api/v2/cms/contents/logo/content\" width=\"64px\" height=\"64px\"></td><td>ادمین</td></tr><tr><td>شناسه:</td><td>---</td></tr><tr><td>نام:</td><td>logo</td></tr><tr><td>تاریخ ایجاد:</td><td itemprop=\"datePublished\">2019-12-08 00:12:34</td></tr><tr><td>آخرین بروزرسانی:</td><td>2020-04-09 12:11:56</td></tr>"}],"on":{},"id":"div-body","version":"wb4"}],"on":{},"id":"general","version":"wb4"},{"style":{"flexBasis":"300px","flexGrow":"1","display":"flex","flexDirection":"column"},"type":"div","class":"w3-card w3-margin","children":[{"style":{},"type":"div","class":"w3-container w3-padding","children":[{"style":{"position":"relative"},"type":"h4","html":"فراداده&zwnj;ها","on":{},"version":"wb4"}],"on":{},"id":"div-header","version":"wb4"},{"style":{"flexGrow":"1","flexShrink":"1"},"type":"div","class":"w3-container w3-white","children":[{"style":{"width":"100%"},"type":"table","name":"Table","on":{},"version":"wb4","children":[],"id":"info-table","html":"<tr><td>نوع</td><td>لوگو</td></tr>"}],"on":{},"id":"div-body","version":"wb4"}],"on":{},"version":"wb4","id":"metadata"},{"style":{"flexBasis":"300px","flexGrow":"1","display":"flex","flexDirection":"column"},"type":"div","class":"w3-card w3-margin","children":[{"style":{},"type":"div","class":"w3-container w3-padding","children":[{"style":{"position":"relative"},"type":"h4","html":"برچسب&zwnj;ها","on":{},"version":"wb4"}],"on":{},"id":"div-header","version":"wb4"},{"style":{"flexGrow":"1","flexShrink":"1"},"type":"div","class":"w3-container w3-white","children":[{"style":{"display":"flex","flexDirection":"row","justifyContent":"flex-start","padding":"0px 16px 8px 0px","paddingTop":"0px","paddingRight":"16px","paddingBottom":"8px","paddingLeft":"0px"},"type":"div","name":"div","on":{},"children":[{"style":{"flexGrow":"1","flexShrink":"1","display":"flex","justifyContent":"flex-start","flexWrap":"wrap"},"type":"ObjectCollection","name":"Object collection","on":{"init":"var url = '/api/v2/cms/contents/' + $routeParams['id'] + '/term-taxonomies';\n// $widget.setProperty('url', url);"},"id":"tags","children":[{"html":"{{term.name}}","type":"a","name":"A link","on":{},"style":{"borderRadius":"2px","padding":"4px","margin":"8px","borderTopLeftRadius":"2px","borderTopRightRadius":"2px","borderBottomRightRadius":"2px","borderBottomLeftRadius":"2px","paddingTop":"4px","paddingRight":"4px","paddingBottom":"4px","paddingLeft":"4px","marginTop":"8px","marginRight":"8px","marginBottom":"8px","marginLeft":"8px","textDecoration":"none","textDecorationLine":"none","textDecorationStyle":"initial","textDecorationColor":"initial"},"id":"template","class":"w3-tag w3-light-grey w3-small w3-margin-bottom","href":"blog/posts?ttid={{id}}","version":"wb4"}],"filters":[{"key":"taxonomy","value":"tag"}],"version":"wb4","properties":"{items{id,taxonomy,description,count,term{name}}}","template":"{\"html\":\"{{term.name}}\",\"type\":\"a\",\"name\":\"A link\",\"on\":{},\"style\":{\"borderRadius\":\"2px\",\"padding\":\"4px\",\"margin\":\"8px\",\"borderTopLeftRadius\":\"2px\",\"borderTopRightRadius\":\"2px\",\"borderBottomRightRadius\":\"2px\",\"borderBottomLeftRadius\":\"2px\",\"paddingTop\":\"4px\",\"paddingRight\":\"4px\",\"paddingBottom\":\"4px\",\"paddingLeft\":\"4px\",\"marginTop\":\"8px\",\"marginRight\":\"8px\",\"marginBottom\":\"8px\",\"marginLeft\":\"8px\",\"textDecoration\":\"none\",\"textDecorationLine\":\"none\",\"textDecorationStyle\":\"initial\",\"textDecorationColor\":\"initial\"},\"id\":\"template\",\"class\":\"w3-tag w3-light-grey w3-small w3-margin-bottom\",\"href\":\"blog/pages?ttid={{id}}\",\"version\":\"wb4\"}"}],"id":"div-tags","version":"wb4"}],"on":{},"id":"div-body","version":"wb4"}],"on":{},"id":"tags","version":"wb4"},{"style":{"flexBasis":"300px","flexGrow":"1","flexDirection":"column","display":"flex"},"type":"div","class":"w3-card w3-margin","children":[{"style":{},"type":"div","class":"w3-container w3-padding","children":[{"style":{"position":"relative"},"type":"h4","html":"دسته بندی&zwnj;ها","on":{},"version":"wb4"}],"on":{},"id":"div-header","version":"wb4"},{"style":{"flexGrow":"1","flexShrink":"1"},"type":"div","class":"w3-container w3-white","children":[{"style":{"display":"flex","flexDirection":"row","justifyContent":"flex-start","padding":"0px 16px 8px 0px","paddingTop":"0px","paddingRight":"16px","paddingBottom":"8px","paddingLeft":"0px"},"type":"div","name":"div","on":{},"children":[{"style":{"flexGrow":"1","flexShrink":"1","display":"flex","justifyContent":"flex-start","flexWrap":"wrap"},"type":"ObjectCollection","name":"Object collection","on":{"init":"var url = '/api/v2/cms/contents/' + $routeParams['id'] + '/term-taxonomies';\n// $widget.setProperty('url', url);"},"template":"{\"html\":\"{{term.name}}\",\"type\":\"a\",\"name\":\"A link\",\"on\":{},\"style\":{\"borderRadius\":\"2px\",\"padding\":\"4px\",\"margin\":\"8px\",\"borderTopLeftRadius\":\"2px\",\"borderTopRightRadius\":\"2px\",\"borderBottomRightRadius\":\"2px\",\"borderBottomLeftRadius\":\"2px\",\"paddingTop\":\"4px\",\"paddingRight\":\"4px\",\"paddingBottom\":\"4px\",\"paddingLeft\":\"4px\",\"marginTop\":\"8px\",\"marginRight\":\"8px\",\"marginBottom\":\"8px\",\"marginLeft\":\"8px\",\"textDecoration\":\"none\",\"textDecorationLine\":\"none\",\"textDecorationStyle\":\"initial\",\"textDecorationColor\":\"initial\"},\"id\":\"template\",\"class\":\"w3-tag w3-light-grey w3-small w3-margin-bottom\",\"href\":\"blog/pages?ttid={{id}}\",\"version\":\"wb4\"}","id":"categories","children":[{"html":"{{term.name}}","type":"a","name":"A link","on":{},"style":{"borderRadius":"2px","padding":"4px","margin":"8px","borderTopLeftRadius":"2px","borderTopRightRadius":"2px","borderBottomRightRadius":"2px","borderBottomLeftRadius":"2px","paddingTop":"4px","paddingRight":"4px","paddingBottom":"4px","paddingLeft":"4px","marginTop":"8px","marginRight":"8px","marginBottom":"8px","marginLeft":"8px","textDecoration":"none","textDecorationLine":"none","textDecorationStyle":"initial","textDecorationColor":"initial"},"id":"template","class":"w3-tag w3-light-grey w3-small w3-margin-bottom","href":"blog/posts?ttid={{id}}","version":"wb4"}],"filters":[{"key":"taxonomy","value":"category"}],"properties":"{items{id,taxonomy,description,count,term{name}}}","version":"wb4"}],"id":"div-categories","version":"wb4"}],"on":{},"id":"div-body","version":"wb4"}],"on":{},"id":"categories","version":"wb4"}],"on":{},"id":"information","version":"wb4"}],"id":"div-content"},{"style":{},"type":"hr","name":"hr","on":{},"version":"wb4"},{"style":{"display":"flex","flexDirection":"row","justifyContent":"center","flexGrow":"1","flexBasis":"300px","flexShrink":"1","flexWrap":"wrap","direction":"rtl"},"type":"div","class":"w3-col","children":[{"style":{},"type":"import","name":"Import","on":{},"version":"wb4","children":[],"url":"/api/v2/cms/contents/blog-widgets/content#div-intro","id":"import-div-intro"}],"on":{},"id":"advertise","version":"wb4"}],"on":{"init":"\nvar brand = $window.getMeta('theme:brand_title');\nvar id = $routeParams['id'];\nvar url = '/api/v2/cms/contents/' + id;\nvar param = {\n    graphql: '{id,name,title,description,creation_dtime,modif_dtime,metas{key,value},term_taxonomies{taxonomy,count,term{name}},author{id,login,profiles{first_name,last_name}}}'\n};\n\nvar dateOptions = {\n\tyear: 'numeric',\n\tmonth: 'long',\n\tday: 'numeric'\n};\n\n$http.get(url,{'params': param})\n.then(function(res){\n    var data = res.data;\n    data = editData(data);\n    setSeoInfo(data);\n    setPageInfo(data);\n    setPageMeta(data);\n    initTagsAndCategoriesList(data);\n});\n\nfunction editData(item){\n    // Add metas\n    item.metamap = {};\n    item.metas.forEach(function(meta){\n        var k = meta.key.replace(/\\./g, '_');\n        item.metamap[k] = meta.value;\n    });\n    \n    // Add tags\n    item.tags = [];\n    item.categories = [];\n    item.term_taxonomies.forEach(function(tt){\n        if(tt.taxonomy == 'tag'){\n            var val = {\n                name: tt.term.name,\n                count: tt.count\n            };\n            item.tags.push(val);\n        }else if(tt.taxonomy == 'category'){\n            var val = {\n                name: tt.term.name,\n                count: tt.count\n            };\n            item.categories.push(val);\n        }\n    });\n    item.creation_dtime_iso = new Date(item.creation_dtime).toLocaleDateString('fa-IR', dateOptions);\n\titem.modif_dtime_iso = new Date(item.modif_dtime).toLocaleDateString('fa-IR', dateOptions);\n    return item;\n}\n\nfunction setSeoInfo(data){\n    var url = '/wb/blog/image?id=' + data.id;\n    $window.setLink('canonical', {\n\t\t'rel': 'canonical',\n\t\t'href': url\n\t});\n\t$window.setLink('favicon', {\n\t\t'rel': 'icon',\n\t\t'href': url\n\t});\n    $document.attr('title', data.title  + ' | ' + brand);\n    $window.setMeta('description', data.description);\n    $window.setMeta('link.cover', '/api/v2/cms/contents/'+data.id+'/content');\n}\n\nfunction setPageInfo(data){\n    var contentDiv = $widget.getChildById('div-content');\n    var mainDiv = contentDiv.getChildById('div-main');\n    var image = mainDiv.getChildById('image');\n    var description = mainDiv.getChildById('div-description')\n        .getChildById('description');\n    var title = $widget.getChildById('title');\n            \n    title.setProperty('html', data.title);\n    image.setProperty('src', '/imgx' + url + '/content');\n    image.setProperty('alt', data.title);\n    description.setProperty('html', data.description);\n    \n    var infoTable = contentDiv.getChildById('information')\n                .getChildById('general')\n                .getChildById('div-body')\n                .getChildById('info-table');\n    \n    var avatarUrl = '/api/v2/user/accounts/' + data.author.id + '/avatar';\n    \n    var profile = data.author.profiles.length > 0 ? data.author.profiles[0] : null;\n    var authorName = profile != null ? profile.first_name + ' ' + profile.last_name : data.author.login;\n    var authorRow = '<tr><td><img style=\"border-radius:50%;\" src=\"'+avatarUrl+'\" width=\"64px\" height=\"64px\"></td>' + \n                    '<td>'+authorName+'</td></tr>';\n    \n    var tableContent = authorRow +\n        '<tr><td>شناسه:</td><td>'+data.id+'</td></tr>' +\n        '<tr><td>نام:</td><td>'+data.name+'</td></tr>' +\n        '<tr><td>تاریخ ایجاد:</td><td itemprop=\"datePublished\">'+data.creation_dtime_iso+'</td></tr>' +\n        '<tr><td width=\"110px\">آخرین بروزرسانی:</td><td>'+data.modif_dtime_iso + '</td></tr>' \n    ;\n    infoTable.setProperty('html', tableContent);\n    \n}\n\nfunction setPageMeta(data){\n    var contentDiv = $widget.getChildById('div-content');\n    var infoTable = contentDiv.getChildById('information')\n                .getChildById('metadata')\n                .getChildById('div-body')\n                .getChildById('info-table');\n    \n    var tableContent = '';\n    data.metas.forEach(function(meta){\n        tableContent += '<tr><td>'+meta.key+'</td><td>'+meta.value+'</td></tr>';\n    });\n    infoTable.setProperty('html', tableContent);\n    \n}\n\nfunction initTagsAndCategoriesList(data){\n    var infoDiv = $widget.getChildById('div-content')\n            .getChildById('information');\n    var tagCol = infoDiv.getChildById('tags')\n            .getChildById('div-body')\n            .getChildById('div-tags')\n            .getChildById('tags');\n    // Tags will be determined by a filter in the collection\n    var ttRest = '/api/v2/cms/contents/'+data.id+'/term-taxonomies';        \n     \n    tagCol.setProperty('url', ttRest);\n    \n    var catCol = infoDiv.getChildById('categories')\n            .getChildById('div-body')\n            .getChildById('div-categories')\n            .getChildById('categories');\n    // Categories will be determined by a filter in the collection\n    catCol.setProperty('url', ttRest);\n}"},"version":"wb4","id":"image","itemscope":"true","itemtype":"https://schema.org/ImageObject"},{"style":{},"type":"import","name":"Import","on":{},"version":"wb4","children":[],"url":"/api/v2/cms/contents/blog-widgets/content#main-footer","id":"import-footer"}],"id":"body","class":"w3-light-grey","modules":[{"title":"W3 CSS","url":"https://www.w3schools.com/w3css/4/w3.css","type":"css","load":"lazy","state":"success"},{"title":"Persian Fonts","url":"//cdn.viraweb123.ir/api/v2/cdn/libs/persian-free-fonts@0.1.0/fonts.css","type":"css","load":"lazy","state":"success"},{"url":"https://cdn.viraweb123.ir/api/v2/cdn/libs/Font-Awesome@4.7.0/css/font-awesome.min.css","title":"Font Awsome","type":"css","load":"lazy","state":"success"}],"template":""}